import enum

from pydantic import Field

from reia.schemas.base import CreationInfoMixin, Model, TaxonomyMixin


class ELossCategory(str, enum.Enum):
    CONTENTS = 'contents'
    BUSINESS_INTERRUPTION = 'business_interruption'
    NONSTRUCTURAL = 'nonstructural'
    OCCUPANTS = 'occupants'
    STRUCTURAL = 'structural'
    NULL = 'null'


class LossRatio(Model):
    oid: int | None = Field(None, alias='_oid')
    intensitymeasurelevel: float | None = None
    mean: float | None = None
    coefficientofvariation: float | None = None
    pmf_variable: list[float] = []
    pmf_probability: list[float] = []
    vulnerabilityfunction_oid: int | None = Field(
        None, alias='_vulnerabilityfunction_oid')


class VulnerabilityFunction(TaxonomyMixin):
    oid: int | None = Field(None, alias='_oid')
    vulnerabilitymodel_oid: int | None = Field(
        None, alias='_vulnerabilitymodel_oid')
    distribution: str | None = None
    intensitymeasuretype: str | None = None
    lossratios: list[LossRatio] = Field(default=[])


class VulnerabilityModel(CreationInfoMixin):
    oid: int | None = Field(None, alias='_oid')
    name: str | None = None
    description: str | None = None
    assetcategory: str | None = None
    publicid: str | None = None
    type: ELossCategory | None = Field(None, alias='_type')
    vulnerabilityfunctions: list[VulnerabilityFunction] = Field(
        default=[])


class OccupantsVulnerabilityModel(VulnerabilityModel):
    pass


class ContentsVulnerabilityModel(VulnerabilityModel):
    pass


class StructuralVulnerabilityModel(VulnerabilityModel):
    pass


class NonstructuralVulnerabilityModel(VulnerabilityModel):
    pass


class BusinessInterruptionVulnerabilityModel(VulnerabilityModel):
    pass
