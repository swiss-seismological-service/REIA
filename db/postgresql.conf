listen_addresses = '*'
					# comma-separated list of addresses;
					# defaults to 'localhost'; use '*' for all
					# (change requires restart)

#------------------------------------------------------------------------------
# CUSTOM IMPORTANT
#------------------------------------------------------------------------------
plan_cache_mode='force_custom_plan'		# 'auto' causes random long query times
log_destination = 'stderr' 				# logging to docker logs

#------------------------------------------------------------------------------
# MEMORY SETTINGS (16-core, 32GB system)
#------------------------------------------------------------------------------
shared_buffers = 8GB					# 25% of RAM for maximum caching
effective_cache_size = 24GB				# Assume OS uses 75% of RAM for cache
work_mem = 512MB						# Large work_mem for fast aggregations
maintenance_work_mem = 2GB				# Fast index builds and maintenance
max_connections = 100					# Low to allow large work_mem per connection

#------------------------------------------------------------------------------
# PARALLELISM SETTINGS
#------------------------------------------------------------------------------
max_worker_processes = 16				# More than CPU cores for I/O overlap
max_parallel_workers_per_gather = 12	# Per-query parallelism
max_parallel_workers = 16				# Use all cores for parallel queries
max_parallel_maintenance_workers = 8	# Fast parallel maintenance

#------------------------------------------------------------------------------
# CHECKPOINT AND WAL SETTINGS
#------------------------------------------------------------------------------
wal_buffers = 128MB				# Large WAL buffers to reduce I/O
checkpoint_timeout = 15min		# Infrequent checkpoints for max performance
max_wal_size = 4GB				# Allow large WAL for fewer checkpoint interruptions
min_wal_size = 1GB				# Keep more WAL preallocated

#------------------------------------------------------------------------------
# QUERY PLANNER SETTINGS
#------------------------------------------------------------------------------
random_page_cost = 1.1                # SSD optimization
effective_io_concurrency = 200        # Parallel I/O

#------------------------------------------------------------------------------
# QUERY PLANNER SETTINGS
#------------------------------------------------------------------------------
autovacuum = on
autovacuum_max_workers = 8  		# More workers (default: 3)
autovacuum_naptime = '15s'  		# Check more frequently (default: 1min)
autovacuum_work_mem = '1GB' 		# More memory for cleanup

# Global thresholds and scale factors
autovacuum_vacuum_threshold = 1000
autovacuum_analyze_threshold = 500
autovacuum_vacuum_scale_factor = 0.05
autovacuum_analyze_scale_factor = 0.025

# Performance settings
autovacuum_vacuum_cost_delay = 10
autovacuum_vacuum_cost_limit = 2000

#------------------------------------------------------------------------------
# MONITORING
#------------------------------------------------------------------------------
shared_preload_libraries = 'pg_stat_statements'
pg_stat_statements.track = all
pg_stat_statements.max = 1000
track_functions = all
log_min_duration_statement = 10000		# Log queries slower than 10 second